Pre-Requisits:
yum groupinstall "Development Tools"
yum install openssl-devel
yum install libffi-devel
yum install perl-IPC-Cmd



### Install OPEN SSL
curl -O https://www.openssl.org/source/openssl-3.0.4.tar.gz
tar xzf openssl-3.0.4.tar.gz
pushd openssl-3.0.4
./config --prefix=/usr/local/bin/custom-openssl --libdir=lib --openssldir=/etc/pki/tls
make -j1 depend
make -j8
make install_sw
popd


# Install python with SSL Option
curl -O https://www.python.org/ftp/python/3.10.5/Python-3.10.5.tgz
tar -xzf Python-3.10.5.tgz
cd Python-3.10.5

./configure CFLAGS="-I/usr/local/include" LDFLAGS="-L/usr/local/lib" -C --enable-optimizations --with-lto --enable-shared --with-openssl=/usr/local/bin/custom-openssl --with-openssl-rpath=auto --prefix=/usr/local

make -j8
make altinstall


# maybe add:
export CPATH=/usr/local/include
export LIBRARY_PATH=/usr/local/lib
export LD_LIBRARY_PATH=/usr/local/lib

# Probable fix
# error while loading shared libraries: libpython3.10.so.1.0: cannot open shared object file: No such file or directory
ldconfig /usr/local/lib

####### REPEATEDLY failing with python shared libs:
// https://stackoverflow.com/a/43623903
P.S. I came across a similar problem while using virtualenv with python3.6, and I fixed it like so:

First, append include <lib path of python3.x> to /etc/ld.so.conf (Something like: include /opt/python361/lib or include /usr/local/lib)
Then, activate the new configuration by running sudo /sbin/ldconfig -v.
